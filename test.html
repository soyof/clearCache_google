<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸…ç†ç¼“å­˜åŠ©æ‰‹ - æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #667eea;
            text-align: center;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }
        .test-section h3 {
            color: #4a5568;
            margin-top: 0;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #5a67d8;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        .status.success {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }
        .status.info {
            background: #bee3f8;
            color: #2c5282;
            border: 1px solid #90cdf4;
        }
        .storage-info {
            background: #f7fafc;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§¹ æ¸…ç†ç¼“å­˜åŠ©æ‰‹æµ‹è¯•é¡µé¢</h1>
        
        <div class="test-section">
            <h3>ğŸ“Š å½“å‰å­˜å‚¨çŠ¶æ€</h3>
            <button onclick="checkStorage()">æ£€æŸ¥å­˜å‚¨çŠ¶æ€</button>
            <div id="storage-status" class="storage-info"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ’¾ LocalStorage æµ‹è¯•</h3>
            <button onclick="addLocalStorage()">æ·»åŠ  LocalStorage æ•°æ®</button>
            <button onclick="clearLocalStorage()">æ¸…ç©º LocalStorage</button>
            <div id="localStorage-status" class="status"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“‚ SessionStorage æµ‹è¯•</h3>
            <button onclick="addSessionStorage()">æ·»åŠ  SessionStorage æ•°æ®</button>
            <button onclick="clearSessionStorage()">æ¸…ç©º SessionStorage</button>
            <div id="sessionStorage-status" class="status"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸª Cookie æµ‹è¯•</h3>
            <button onclick="addCookies()">æ·»åŠ  Cookie æ•°æ®</button>
            <button onclick="clearCookies()">æ¸…ç©º Cookie</button>
            <div id="cookies-status" class="status"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ—„ï¸ IndexedDB æµ‹è¯•</h3>
            <button onclick="addIndexedDB()">æ·»åŠ  IndexedDB æ•°æ®</button>
            <button onclick="clearIndexedDB()">æ¸…ç©º IndexedDB</button>
            <div id="indexedDB-status" class="status"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“‹ Cache API æµ‹è¯•</h3>
            <button onclick="addCacheAPI()">æ·»åŠ  Cache æ•°æ®</button>
            <button onclick="clearCacheAPI()">æ¸…ç©º Cache</button>
            <div id="cacheAPI-status" class="status"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ§¹ æ’ä»¶æµ‹è¯•</h3>
            <p>å®‰è£…æ’ä»¶åï¼Œç‚¹å‡»æµè§ˆå™¨å·¥å…·æ ä¸­çš„æ’ä»¶å›¾æ ‡ï¼Œæµ‹è¯•å„ç§æ¸…ç†åŠŸèƒ½ã€‚</p>
            <p><strong>å»ºè®®æµ‹è¯•æ­¥éª¤ï¼š</strong></p>
            <ol>
                <li>ç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®æ·»åŠ å„ç§ç±»å‹çš„æµ‹è¯•æ•°æ®</li>
                <li>ä½¿ç”¨æ’ä»¶çš„æ¸…ç†åŠŸèƒ½</li>
                <li>å†æ¬¡ç‚¹å‡»"æ£€æŸ¥å­˜å‚¨çŠ¶æ€"éªŒè¯æ¸…ç†æ•ˆæœ</li>
            </ol>
        </div>
    </div>

    <script>
        // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
        function showStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${type}`;
            element.style.display = 'block';
            setTimeout(() => {
                element.style.display = 'none';
            }, 3000);
        }
        
        // æ£€æŸ¥å­˜å‚¨çŠ¶æ€
        function checkStorage() {
            const status = document.getElementById('storage-status');
            const info = {
                localStorage: {
                    count: localStorage.length,
                    keys: Object.keys(localStorage)
                },
                sessionStorage: {
                    count: sessionStorage.length,
                    keys: Object.keys(sessionStorage)
                },
                cookies: document.cookie.split(';').filter(c => c.trim()).length,
                userAgent: navigator.userAgent.substring(0, 50) + '...'
            };
            
            status.innerHTML = `
                <strong>å­˜å‚¨çŠ¶æ€ï¼š</strong><br>
                LocalStorage: ${info.localStorage.count} é¡¹ [${info.localStorage.keys.join(', ')}]<br>
                SessionStorage: ${info.sessionStorage.count} é¡¹ [${info.sessionStorage.keys.join(', ')}]<br>
                Cookies: ${info.cookies} é¡¹<br>
                User Agent: ${info.userAgent}
            `;
        }
        
        // LocalStorage æµ‹è¯•
        function addLocalStorage() {
            const testData = {
                'test-key-1': 'LocalStorage æµ‹è¯•æ•°æ® 1',
                'test-key-2': 'LocalStorage æµ‹è¯•æ•°æ® 2',
                'test-timestamp': new Date().toISOString(),
                'test-number': Math.random().toString()
            };
            
            Object.entries(testData).forEach(([key, value]) => {
                localStorage.setItem(key, value);
            });
            
            showStatus('localStorage-status', `å·²æ·»åŠ  ${Object.keys(testData).length} é¡¹ LocalStorage æ•°æ®`, 'success');
        }
        
        function clearLocalStorage() {
            const count = localStorage.length;
            localStorage.clear();
            showStatus('localStorage-status', `å·²æ¸…ç©º ${count} é¡¹ LocalStorage æ•°æ®`, 'success');
        }
        
        // SessionStorage æµ‹è¯•
        function addSessionStorage() {
            const testData = {
                'session-key-1': 'SessionStorage æµ‹è¯•æ•°æ® 1',
                'session-key-2': 'SessionStorage æµ‹è¯•æ•°æ® 2',
                'session-timestamp': new Date().toISOString()
            };
            
            Object.entries(testData).forEach(([key, value]) => {
                sessionStorage.setItem(key, value);
            });
            
            showStatus('sessionStorage-status', `å·²æ·»åŠ  ${Object.keys(testData).length} é¡¹ SessionStorage æ•°æ®`, 'success');
        }
        
        function clearSessionStorage() {
            const count = sessionStorage.length;
            sessionStorage.clear();
            showStatus('sessionStorage-status', `å·²æ¸…ç©º ${count} é¡¹ SessionStorage æ•°æ®`, 'success');
        }
        
        // Cookie æµ‹è¯•
        function addCookies() {
            const cookies = [
                'test-cookie-1=æµ‹è¯•Cookieæ•°æ®1',
                'test-cookie-2=æµ‹è¯•Cookieæ•°æ®2',
                'test-timestamp=' + Date.now()
            ];
            
            cookies.forEach(cookie => {
                document.cookie = cookie + '; path=/';
            });
            
            showStatus('cookies-status', `å·²æ·»åŠ  ${cookies.length} ä¸ª Cookie`, 'success');
        }
        
        function clearCookies() {
            const cookies = document.cookie.split(';');
            let count = 0;
            
            cookies.forEach(cookie => {
                const eqPos = cookie.indexOf('=');
                const name = eqPos > -1 ? cookie.substr(0, eqPos).trim() : cookie.trim();
                if (name) {
                    document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';
                    count++;
                }
            });
            
            showStatus('cookies-status', `å·²å°è¯•æ¸…ç©º ${count} ä¸ª Cookieï¼ˆæŸäº› Cookie å¯èƒ½éœ€è¦æ’ä»¶æ¸…ç†ï¼‰`, 'info');
        }
        
        // IndexedDB æµ‹è¯•
        async function addIndexedDB() {
            try {
                const request = indexedDB.open('TestDB', 1);
                
                request.onupgradeneeded = function(event) {
                    const db = event.target.result;
                    const objectStore = db.createObjectStore('testStore', { keyPath: 'id' });
                };
                
                request.onsuccess = function(event) {
                    const db = event.target.result;
                    const transaction = db.transaction(['testStore'], 'readwrite');
                    const objectStore = transaction.objectStore('testStore');
                    
                    const testData = [
                        { id: 1, name: 'IndexedDB æµ‹è¯•æ•°æ® 1', timestamp: Date.now() },
                        { id: 2, name: 'IndexedDB æµ‹è¯•æ•°æ® 2', timestamp: Date.now() }
                    ];
                    
                    testData.forEach(data => {
                        objectStore.add(data);
                    });
                    
                    showStatus('indexedDB-status', 'å·²æ·»åŠ  IndexedDB æµ‹è¯•æ•°æ®', 'success');
                };
                
                request.onerror = function() {
                    showStatus('indexedDB-status', 'IndexedDB æ“ä½œå¤±è´¥', 'error');
                };
            } catch (error) {
                showStatus('indexedDB-status', 'IndexedDB ä¸æ”¯æŒ: ' + error.message, 'error');
            }
        }
        
        async function clearIndexedDB() {
            try {
                const databases = await indexedDB.databases();
                let count = 0;
                
                for (const db of databases) {
                    const deleteRequest = indexedDB.deleteDatabase(db.name);
                    deleteRequest.onsuccess = () => count++;
                }
                
                setTimeout(() => {
                    showStatus('indexedDB-status', `å·²åˆ é™¤ ${databases.length} ä¸ª IndexedDB æ•°æ®åº“`, 'success');
                }, 1000);
            } catch (error) {
                showStatus('indexedDB-status', 'IndexedDB æ¸…ç†å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // Cache API æµ‹è¯•
        async function addCacheAPI() {
            try {
                if ('caches' in window) {
                    const cache = await caches.open('test-cache-v1');
                    await cache.put('/test-url', new Response('æµ‹è¯•ç¼“å­˜æ•°æ®'));
                    showStatus('cacheAPI-status', 'å·²æ·»åŠ  Cache API æµ‹è¯•æ•°æ®', 'success');
                } else {
                    showStatus('cacheAPI-status', 'æµè§ˆå™¨ä¸æ”¯æŒ Cache API', 'info');
                }
            } catch (error) {
                showStatus('cacheAPI-status', 'Cache API æ“ä½œå¤±è´¥: ' + error.message, 'error');
            }
        }
        
        async function clearCacheAPI() {
            try {
                if ('caches' in window) {
                    const cacheNames = await caches.keys();
                    let count = 0;
                    
                    for (const name of cacheNames) {
                        await caches.delete(name);
                        count++;
                    }
                    
                    showStatus('cacheAPI-status', `å·²æ¸…ç©º ${count} ä¸ª Cache`, 'success');
                } else {
                    showStatus('cacheAPI-status', 'æµè§ˆå™¨ä¸æ”¯æŒ Cache API', 'info');
                }
            } catch (error) {
                showStatus('cacheAPI-status', 'Cache API æ¸…ç†å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥å­˜å‚¨çŠ¶æ€
        window.addEventListener('load', checkStorage);
    </script>
</body>
</html>
